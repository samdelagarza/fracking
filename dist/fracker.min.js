/*! fracking - v0.1.0 - 2012-11-08
* https://github.com/samdelagarza/fracking
* Copyright (c) 2012 TradeStation Technologies, Inc. All rights reserved; Licensed MIT */
var getRemainder=function(e){var t=Math.abs(e).toString();return t.indexOf(".")<0?0:e.toString().split(".")[1]},isFloat=function(e){return Math.abs(e)%1>0},isNegative=function(e){return e.toString().indexOf("-")>-1},isMultiFractional=function(e,t){return t.secondaryDivisor!==1||e.indexOf("'")>-1},getFixedLength=function(e,t){var n=t.primaryDivisor.toString().length-1,r=getRemainder(e)===0?0:getRemainder(e).toString().length;return n=r>n?r:n,n},getParts=function(e,t){var n,r,i,s;return n=e.toString().split(t),r=n[0],i=n[1],[r,i]},getMinMove=function(e){return 1/(e.primaryDivisor*e.secondaryDivisor)},convertToFractional=function(e,t){var n=e[1].toString().length,r=Math.pow(10,n),i=r/t.primaryDivisor,s=e[0].replace("-","")==="0"?"":e[0]+" ",o=1/t.primaryDivisor,u,a,f,l,c,h,p;return e[0]===0&&e[1]===0?"0'00.0":(isMultiFractional(e.join("."),t)?(f=s.toString().replace(/\s/g,""),f=f.length===0?0:f,l=parseFloat("."+e[1]),c=l/o,c===1?f=f+"'0"+c+".0":(p=c.toString().split(".")[0],h=c.toString().split(".")[1]||0,c<10&&(p="0"+p),f=(isNegative(e[0])?"-":"")+f+"'"+p+"."+h)):(u=e[1]/i,a=r/i,f=(isNegative(e[0])?"-":"")+s+u+"/"+a),f)},convertFractionalRemainderToDecimal=function(e,t){var n="",r=e+"";if(t.secondaryDivisor!==10){if(r.indexOf(".2")>-1||r.indexOf(".7")>-1)n="5";else if(r.indexOf(".1")>-1||r.indexOf(".6")>-1)n="25";else if(r.indexOf(".3")>-1||r.indexOf(".8")>-1)n="75";r+=n,e=parseFloat(r)}return(e/t.primaryDivisor).toFixed(9).replace("0.",".")},roundToNearestMinMove=function(e,t){var n=getMinMove(t),r=e%n;return parseFloat((e-r+(r<n/2?0:n)).toFixed(9))},convertToFloat=function(e,t){var n=" ",r="/",i="'",s=0,o,u,a;return isMultiFractional(e,t)?(o=parseInt(e.split(i)[0],10),s=parseFloat(e.split(i)[1]),a=parseFloat(o+convertFractionalRemainderToDecimal(s,t))):(o=parseInt(e.split(n)[0],10),u=e.split(n)[1],e.indexOf("/")>-1&&(s=u.split(r)[0]/u.split(r)[1]),a=parseFloat(o+s)),roundToNearestMinMove(a,t)},f={toStringFromFloat:function(e,t){var n=0,r;t=t||{base:10,primaryDivisor:1,secondaryDivisor:1};if(t.base===10)return n=getFixedLength(e,t),r=e===0?e.toFixed(n):e.toFixed(n),r.toString();if(t.base===2)return e},toFractionalFromFloat:function(e,t){var n,r=t.secondaryDivisor!==1;if(t.base===2)return isFloat(e)?(n=getParts(e,"."),convertToFractional(n,t)):r?e+"'00.0":e},toFloatFromFractional:function(e,t){return convertToFloat(e,t)},incrementFractional:function(e,t){var n=this.toFloatFromFractional(e,t),r=getMinMove(t);return this.toFractionalFromFloat(n+r,t)},decrementFractional:function(e,t){var n=this.toFloatFromFractional(e,t),r=getMinMove(t);return this.toFractionalFromFloat(n-r,t)}};exports.fracker={toStringFromFloat:f.toStringFromFloat,toFractionalFromFloat:f.toFractionalFromFloat,toFloatFromFractional:f.toFloatFromFractional,incrementFractional:f.incrementFractional,decrementFractional:f.decrementFractional,incrementFloat:f.incrementFloat,decrementFloat:f.decrementFloat};